---
import type { MarkdownInstance } from "astro";
import { format } from "date-fns";
import "../styles/md.scss";

interface Props {
  post: MarkdownInstance<Record<string, any>>;
  outsidePostPage?: boolean;
  showDate?: boolean;
  linkInTitle?: boolean;
  returnLink?: boolean;
  showImage?: boolean;
}

const {
  post,
  outsidePostPage = false,
  showDate = true,
  linkInTitle = true,
  returnLink = true,
  showImage = true,
} = Astro.props;
---

<article class="relative pb-6">
  <h1
    class={`text-4xl transition-transform origin-left font-extrabold w-fit ${
      linkInTitle ? "hover:scale-[1.1]" : ""
    }`}
  >
    {
      linkInTitle ? (
        <a href="/blog">
          <span transition:name={`post-title-${post.frontmatter.title}`}>
            {post.frontmatter.title}{" "}
          </span>
          <span
            class={`${!showDate ? "hidden" : ""} italic text-2xl font-semibold`}
            transition:name={`post-title-${post.frontmatter.title}-date`}
          >
            {format(new Date(post.frontmatter.date), "dd.MM.yyyy.")}
          </span>
        </a>
      ) : (
        <div>
          <span transition:name={`post-title-${post.frontmatter.title}`}>
            {post.frontmatter.title}{" "}
          </span>
          <span
            class={`${!showDate ? "hidden" : ""} italic text-2xl font-semibold`}
            transition:name={`post-title-${post.frontmatter.title}-date`}
          >
            {format(new Date(post.frontmatter.date), "dd.MM.yyyy.")}
          </span>
        </div>
      )
    }
  </h1>
  <div class="py-2">
    <img
      src={post.frontmatter.imageURL}
      alt={post.frontmatter.title}
      class={` ${!showImage ? "hidden" : ""} rounded-3xl select-none mb-2`}
      transition:name={`post-title-${post.frontmatter.title}-image`}
    />
  </div>
  <div
    class={`${
      outsidePostPage
        ? "p-4 border-2 border-dashed rounded-xl border-zinc-600"
        : ""
    }`}
    post-content
  >
    <post.Content />
  </div>
  <br />
  <a
    href="/blog"
    class={`w-20 h-20 hover:underline underline-offset-[0.3rem] text-xl italic ${
      returnLink ? "inline" : "hidden"
    }`}>{"<-- Return"}</a
  >
</article>
