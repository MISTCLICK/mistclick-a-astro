---
import type { GetStaticPaths } from "astro";
import Base from "../layouts/Base.astro";
import SubMain from "../layouts/SubMain.astro";

import "../styles/md.scss";

export const getStaticPaths = (async () => {
  const allPages = await Astro.glob("../content/non-blogposts/*.md");

  return allPages.map((p) => {
    return {
      params: { slug: p.file.split("/").at(-1)!.replaceAll(".md", "") },
      props: { page: p },
    };
  });
}) satisfies GetStaticPaths;

const { page } = Astro.props;
---

<Base
  title={`${page.frontmatter.title} | MISTCLICK's den`}
  description={page.frontmatter.description}
>
  <SubMain>
    <div class="flex grow flex-col items-center p-6">
      <article class="md:max-w-[55%]">
        <div post-content>
          <page.Content />
        </div>
      </article>
    </div>
  </SubMain>
</Base>
